[网络编程 - Java教程 - 廖雪峰的官方网站](https://liaoxuefeng.com/books/java/network/index.html)

# Socket

在开发网络应用程序的时候，我们又会遇到 Socket 这个概念。Socket 是一个抽象概念，一个应用程序通过一个 Socket 来建立一个远程连接，而 Socket 内部通过 TCP/IP 协议把数据传输到网络：

![600](../../assets/Pasted%20image%2020241029213630.png)

> Socket 是一个 TCP 到应用层的抽象层

==Socket、TCP 和部分 IP 的功能都是由操作系统提供的==，不同的编程语言只是提供了对操作系统调用的简单的封装。例如，Java 提供的几个 Socket 相关的类就封装了操作系统提供的接口。

**为什么需要 Socket 进行网络通信？**

因为仅仅通过 IP 地址进行通信是不够的，同一台计算机同一时间会运行多个网络应用程序，例如浏览器、QQ、邮件客户端等。当操作系统接收到一个数据包的时候，==如果只有 IP 地址，它没法判断应该发给哪个应用程序==。

所以，操作系统抽象出 Socket 接口，每个应用程序需要各自对应到不同的 Socket，数据包才能根据 Socket 正确地发到对应的应用程序。

一个 Socket 就是由 IP 地址和端口号（范围是 0～65535）组成，可以把 Socket 简单理解为 IP 地址加端口号。

> 端口号总是由操作系统分配，它是一个 0～65535 之间的数字，其中，小于 1024 的端口属于**特权端口**，需要管理员权限，大于 1024 的端口可以由任意用户的应用程序打开。
> 
> - Browser: `101.202.99.2:1201`
> - QQ: `101.202.99.2:1304`
> - Email: `101.202.99.2:15000`

使用 Socket 进行网络编程时，本质上就是==两个进程之间的网络通信==。
- 其中一个进程必须充当**服务器端**，它会主动监听某个指定的端口，
- 另一个进程必须充当**客户端**，它必须主动连接服务器的 IP 地址和指定端口，
- 如果连接成功，服务器端和客户端就成功地建立了一个 TCP 连接，双方后续就可以随时发送和接收数据。

因此，当 Socket 连接成功地在服务器端和客户端之间建立后：

- 对服务器端来说，它的 Socket 是指定的 IP 地址和指定的端口号；
- 对客户端来说，它的 Socket 是==它所在计算机的 IP 地址和一个由操作系统分配的随机端口号==。

